<!DOCTYPE html>
<html>
<head>
    <title>Todo List</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">

        <div class="header">
            <div class="header-left">
                <form action="/logout" method="POST" style="display: inline;">
                    <button type="submit" class="logout-button">üö™ Logout</button>
                </form>
            </div>
            <h1 class="header-title">‚ú® Todo List</h1>
            <div class="header-right">
                <h3 class="username">{{ request.session["username"] }}</h3>
            </div>
        </div>
        
        {% if error %}
        <div class="error">{{ error }}</div>
        {% endif %}

        <form class="add-todo-form" action="/addtodo" method="POST">
            <input type="text" name="title" placeholder="What needs to be done?" required>
            <button type="submit" class="add-button">Add Todo</button>
        </form>

        <div id="todoList">
            {% for todo in todos %}
            <div class="todo-item {% if todo.completed %}completed{% endif %}">
                <div class="todo-content">
                    <span class="todo-title">{{ todo.title }}</span>
                    <span class="todo-date">{{ todo.created_at }}</span>
                </div>
                <div class="todo-actions">
                    <form action="/updatetodo/{{ todo.id }}" method="POST" style="display: inline;">
                        <button type="submit" class="update-button">
                            {% if todo.completed %}‚Ü©Ô∏è Undo{% else %}‚úÖ Complete{% endif %}
                        </button>
                    </form>
                    <form action="/deletetodo/{{ todo.id }}" method="POST" style="display: inline;">
                        <button type="submit" class="delete-button" onclick="return confirm('Are you sure you want to delete this todo?')">üóëÔ∏è Delete</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>